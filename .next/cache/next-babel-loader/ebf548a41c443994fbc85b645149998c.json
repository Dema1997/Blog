{"ast":null,"code":"import dbConnect from '../../../utils/dbConnect';\nimport User from '../../../models/User';\ndbConnect();\nexport default findById = async (req, res) => {\n  const {\n    query: {\n      id\n    },\n    method\n  } = req;\n\n  switch (method) {\n    case 'GET':\n      try {\n        const user = (await User.findById(id)) || (await User.findOne({\n          $or: [{\n            \"email\": {\n              email\n            }\n          }]\n        }));\n\n        if (!user) {\n          return res.status(400).json({\n            success: false\n          });\n        }\n\n        res.status(200).json({\n          success: true,\n          data: user\n        });\n      } catch (error) {\n        res.status(400).json({\n          success: false\n        });\n      }\n\n      break;\n\n    case 'PUT':\n      try {\n        const user = await User.findByIdAndUpdate(id, req.body, {\n          new: true,\n          runValidators: true\n        });\n\n        if (!user) {\n          return res.status(400).json({\n            success: false\n          });\n        }\n\n        res.status(200).json({\n          success: true,\n          data: user\n        });\n      } catch (error) {\n        res.status(400).json({\n          success: false\n        });\n      }\n\n      break;\n\n    case 'DELETE':\n      try {\n        const deletedUser = await User.deleteOne({\n          _id: id\n        });\n\n        if (!deletedUser) {\n          return res.status(400).json({\n            success: false\n          });\n        }\n\n        res.status(200).json({\n          success: true,\n          data: {}\n        });\n      } catch (error) {\n        res.status(400).json({\n          success: false\n        });\n      }\n\n      break;\n\n    default:\n      res.status(400).json({\n        success: false\n      });\n      break;\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Desktop/Blog/Blog/pages/api/users/[id].js"],"names":["dbConnect","User","findById","req","res","query","id","method","user","findOne","$or","email","status","json","success","data","error","findByIdAndUpdate","body","new","runValidators","deletedUser","deleteOne","_id"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,0BAAtB;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AAEAD,SAAS;AAET,eAAeE,QAAQ,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAmB;AACzC,QAAM;AACFC,IAAAA,KAAK,EAAE;AAAEC,MAAAA;AAAF,KADL;AAEFC,IAAAA;AAFE,MAGFJ,GAHJ;;AAKA,UAAOI,MAAP;AACI,SAAK,KAAL;AACI,UAAI;AACA,cAAMC,IAAI,GAAG,OAAMP,IAAI,CAACC,QAAL,CAAcI,EAAd,CAAN,MAA2B,MAAML,IAAI,CAACQ,OAAL,CAC1C;AACEC,UAAAA,GAAG,EAAE,CACE;AAAE,qBAAU;AAACC,cAAAA;AAAD;AAAZ,WADF;AADP,SAD0C,CAAjC,CAAb;;AAQA,YAAG,CAACH,IAAJ,EAAS;AACL,iBAAOJ,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,YAAAA,OAAO,EAAC;AAAV,WAArB,CAAP;AACH;;AACDV,QAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,UAAAA,OAAO,EAAC,IAAT;AAAeC,UAAAA,IAAI,EAAEP;AAArB,SAArB;AACH,OAbD,CAaC,OAAMQ,KAAN,EAAY;AACTZ,QAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,UAAAA,OAAO,EAAC;AAAT,SAArB;AACH;;AACD;;AACJ,SAAK,KAAL;AACI,UAAG;AACC,cAAMN,IAAI,GAAG,MAAMP,IAAI,CAACgB,iBAAL,CAAuBX,EAAvB,EAA2BH,GAAG,CAACe,IAA/B,EAAqC;AACpDC,UAAAA,GAAG,EAAE,IAD+C;AAEpDC,UAAAA,aAAa,EAAE;AAFqC,SAArC,CAAnB;;AAIA,YAAG,CAACZ,IAAJ,EAAS;AACL,iBAAOJ,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,YAAAA,OAAO,EAAE;AAAV,WAArB,CAAP;AACH;;AACDV,QAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,UAAAA,OAAO,EAAC,IAAT;AAAeC,UAAAA,IAAI,EAACP;AAApB,SAArB;AACH,OATD,CASC,OAAMQ,KAAN,EAAY;AACTZ,QAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,UAAAA,OAAO,EAAC;AAAT,SAArB;AACH;;AACD;;AACJ,SAAK,QAAL;AACI,UAAG;AACC,cAAMO,WAAW,GAAC,MAAMpB,IAAI,CAACqB,SAAL,CAAe;AAACC,UAAAA,GAAG,EAAEjB;AAAN,SAAf,CAAxB;;AAEA,YAAG,CAACe,WAAJ,EAAgB;AACZ,iBAAOjB,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,YAAAA,OAAO,EAAC;AAAT,WAArB,CAAP;AACH;;AACDV,QAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,UAAAA,OAAO,EAAC,IAAT;AAAeC,UAAAA,IAAI,EAAC;AAApB,SAArB;AACH,OAPD,CAOC,OAAMC,KAAN,EAAY;AACTZ,QAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,UAAAA,OAAO,EAAC;AAAT,SAArB;AACH;;AACD;;AACJ;AACIV,MAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,QAAAA,OAAO,EAAC;AAAT,OAArB;AACA;AA/CR;AAiDH,CAvDD","sourcesContent":["import dbConnect from '../../../utils/dbConnect'\r\nimport User from '../../../models/User'\r\n\r\ndbConnect()\r\n\r\nexport default findById = async (req, res) =>{\r\n    const {\r\n        query: { id },\r\n        method\r\n    } = req\r\n\r\n    switch(method) {\r\n        case 'GET':\r\n            try {\r\n                const user = await User.findById(id) || await User.findOne(\r\n                    {\r\n                      $or: [\r\n                             { \"email\" : {email} } \r\n                           ]\r\n                    }\r\n                 );\r\n                 \r\n                if(!user){\r\n                    return res.status(400).json({ success:false})\r\n                }\r\n                res.status(200).json({success:true, data: user})\r\n            }catch(error){\r\n                res.status(400).json({success:false})\r\n            }\r\n            break;\r\n        case 'PUT':\r\n            try{\r\n                const user = await User.findByIdAndUpdate(id, req.body, {\r\n                    new: true,\r\n                    runValidators: true\r\n                });\r\n                if(!user){\r\n                    return res.status(400).json({success: false})\r\n                }\r\n                res.status(200).json({success:true, data:user})\r\n            }catch(error){\r\n                res.status(400).json({success:false})\r\n            }\r\n            break;\r\n        case 'DELETE':\r\n            try{\r\n                const deletedUser=await User.deleteOne({_id: id})\r\n\r\n                if(!deletedUser){\r\n                    return res.status(400).json({success:false})\r\n                }\r\n                res.status(200).json({success:true, data:{}})\r\n            }catch(error){\r\n                res.status(400).json({success:false})\r\n            }\r\n            break;\r\n        default:\r\n            res.status(400).json({success:false})\r\n            break;\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}